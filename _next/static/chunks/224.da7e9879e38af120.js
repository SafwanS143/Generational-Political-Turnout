(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{33224:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var r=n(95155),a=n(12115);let l=(0,a.createContext)(null);function o(){let e=(0,a.use)(l);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var s=n(85752),i=n.n(s);let c=(0,a.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:i,placeholder:c,style:u,whenReady:d,zoom:x,...f},m){let[p]=(0,a.useState)({className:o,id:i,style:u}),[h,g]=(0,a.useState)(null),b=(0,a.useRef)(void 0);(0,a.useImperativeHandle)(m,()=>h?.map??null,[h]);let v=(0,a.useCallback)(r=>{if(null!==r&&!b.current){let a=new s.Map(r,f);b.current=a,null!=n&&null!=x?a.setView(n,x):null!=e&&a.fitBounds(e,t),null!=d&&a.whenReady(d),g(Object.freeze({__version:1,map:a}))}},[]);(0,a.useEffect)(()=>()=>{h?.map.remove()},[h]);let y=h?a.createElement(l,{value:h},r):c??null;return a.createElement("div",{...p,ref:v},y)});var u=n(47650);function d(e,t){let n=(0,a.useRef)(t);(0,a.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function x(e,t){let n=(0,a.useRef)(void 0);(0,a.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function f(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function m(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function p(e,t){return null==t?function(t,n){let r=(0,a.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,a.useRef)(void 0);l.current||(l.current=e(n,r));let o=(0,a.useRef)(n),{instance:s}=l.current;return(0,a.useEffect)(function(){o.current!==n&&(t(s,n,o.current),o.current=n)},[s,n,t]),l}}function h(e){return function(t){var n;let r=o(),l=e(f(t,r),r);return d(r.map,t.attribution),x(l.current,t.eventHandlers),n=l.current,(0,a.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),l}}let g=function(e,t){var n;return n=h(p(e,t)),(0,a.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,a.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return m(new s.TileLayer(e,f(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:a}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=a&&a!==n.zIndex&&e.setZIndex(a);let{url:l}=t;null!=l&&l!==n.url&&e.setUrl(l)}),b=function(e,t){var n;return n=h(p(e,t)),(0,a.forwardRef)(function(e,t){let{instance:r,context:o}=n(e).current;(0,a.useImperativeHandle)(t,()=>r);let{children:s}=e;return null==s?null:a.createElement(l,{value:o},s)})}(function({position:e,...t},n){var r;let a=new s.Marker(e,t);return m(a,(r={overlayContainer:a},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),v=function(e,t){var n,r;return n=p(e),r=function(e,r){let a=o(),l=n(f(e,a),a);return d(a.map,e.attribution),x(l.current,e.eventHandlers),t(l.current,a,e,r),l},(0,a.forwardRef)(function(e,t){let[n,l]=(0,a.useState)(!1),{instance:o}=r(e,l).current;(0,a.useImperativeHandle)(t,()=>o),(0,a.useEffect)(function(){n&&o.update()},[o,n,e.children]);let s=o._contentNode;return s?(0,u.createPortal)(e.children,s):null})}(function(e,t){return m(new s.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,a.useEffect)(function(){let{instance:a}=e;function l(e){e.popup===a&&(a.update(),r(!0))}function o(e){e.popup===a&&r(!1)}return t.map.on({popupopen:l,popupclose:o}),null==t.overlayContainer?(null!=n&&a.setLatLng(n),a.openOn(t.map)):t.overlayContainer.bindPopup(a),function(){t.map.off({popupopen:l,popupclose:o}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(a)}},[e,t,r,n])});n(68413);var y=n(83540),j=n(3401),w=n(94754),N=n(96025),k=n(16238),C=n(94517),S=n(83394),O=n(6874),E=n.n(O);function L(){var e,t;let[n,l]=(0,a.useState)([]),[s,u]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null),f=(0,a.useRef)([]);(0,a.useEffect)(()=>{fetch("https://generational-political-turnout.onrender.com/api/voter-turnout").then(e=>e.json()).then(e=>{l(e.filter(e=>e.latitude&&e.longitude&&(!e.geocode_status||"OK"===e.geocode_status)).map(e=>({...e,latitude:Number(e.latitude),longitude:Number(e.longitude)}))),u(!1)})},[]);let m=[...n].sort((e,t)=>(t.votes||0)-(e.votes||0)).slice(0,10),p=new(i()).Icon({iconUrl:"/Generational-Political-Turnout/marker.png",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),h=n.reduce((e,t)=>e+(t.votes||0),0),O=n.length?Math.round(h/n.length):0,L=n.reduce((e,t)=>t.votes>((null==e?void 0:e.votes)||0)?t:e,n[0]||null),T=n.reduce((e,t)=>t.votes<((null==e?void 0:e.votes)||1/0)?t:e,n[0]||null),z={};n.forEach(e=>{let t=e.province?e.province.toUpperCase():"";t&&(z[t]=(z[t]||0)+(e.votes||0))});let I=Object.entries(z),P=I.reduce((e,t)=>{let[n,r]=t;return r>((null==e?void 0:e[1])||0)?[n,r]:e},I[0]||null),R={NL:"Nfld. & Lab.",PE:"Prince Edward Island",NS:"Nova Scotia",NB:"New Brunswick",QC:"Quebec",ON:"Ontario",MB:"Manitoba",SK:"Saskatchewan",AB:"Alberta",BC:"British Columbia",YT:"Yukon",NT:"Northwest Territories",NU:"Nunavut"},A=I.map(e=>{let[t,n]=e;return{Province:t,votes:n}}),M=z.ON||0,V=n.filter(e=>"ON"===(e.province||"").toUpperCase()).length,_=V?Math.round(M/V):0,B="Average votes per campus in Ontario: ".concat(_," (national avg: ").concat(O,")"),H=[...n].sort((e,t)=>(t.votes||0)-(e.votes||0)).slice(0,5).reduce((e,t)=>e+(t.votes||0),0),W=h?Math.round(H/h*100):0,U=n.filter(e=>(e.votes||0)>1e3).length,D="Only ".concat(U," out of ").concat(n.length," campuses had more than ").concat(1e3," votes.");function F(e){let{title:t,value:n,color:a}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 flex flex-col items-center border-t-4",style:{borderTopColor:a},children:[(0,r.jsx)("div",{className:"text-lg text-gray-500 mb-1",children:t}),(0,r.jsx)("div",{className:"text-2xl font-bold",style:{color:a},children:n})]})}return(0,r.jsxs)("div",{className:"min-h-screen bg-white dark:bg-black flex flex-col",children:[(0,r.jsx)("div",{className:"mb-4 p-4",children:(0,r.jsxs)(E(),{href:"/",className:"inline-flex items-center text-blue-600 dark:text-blue-300 font-semibold group",children:[(0,r.jsx)("span",{style:{fontSize:20,marginRight:6},children:"←"}),(0,r.jsx)("span",{className:"underline-hover group-hover:underline",children:"Back"})]})}),(0,r.jsxs)("header",{className:"w-full px-4 py-6 border-b border-gray-200 bg-white dark:bg-black",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1 text-center",children:"On-Campus Federal Election Voting"}),(0,r.jsxs)("section",{className:"w-full max-w-3xl mx-auto mb-6 p-6 bg-gray-100 dark:bg-gray-800 rounded-xl shadow flex flex-col gap-3",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-blue-700 dark:text-blue-300 mb-1",children:"Why On-Campus Voting Data Matters"}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-200 text-lg leading-relaxed",children:"On-campus voting initiatives are crucial for increasing youth engagement and making elections more accessible to students. Analyzing campus voting patterns helps identify where participation is strong, where it can be improved, and how resources can be better allocated to support student voters."}),(0,r.jsx)("div",{className:"text-base font-semibold text-gray-800 dark:text-gray-100 bg-blue-50 dark:bg-blue-900 rounded px-4 py-2 mb-2 mt-1 text-center",children:"Data covers the 2019 federal election."}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-2",children:"What You'll Find on This Page"}),(0,r.jsxs)("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-200 text-base space-y-1",children:[(0,r.jsx)("li",{children:"An interactive map of post-secondary institutions that hosted voting stations in 2019."}),(0,r.jsx)("li",{children:"Top campuses by votes cast and a provincial breakdown of campus voting."}),(0,r.jsx)("li",{children:"Summary statistics and insights to highlight trends and opportunities for greater student participation."})]})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col md:flex-row gap-4 p-4 md:p-8",children:[(0,r.jsxs)("aside",{className:"w-full md:w-80 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md p-4 mb-4 md:mb-0 md:mr-4 flex-shrink-0",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"About This Map"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4 text-sm",children:"This dashboard visualizes the number of votes cast at post-secondary campuses during the 2019 Canadian federal election."}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700 dark:text-gray-200",children:"Top 10 Voting Campuses"}),(0,r.jsx)("ol",{className:"space-y-2",children:m.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between px-2 py-1 rounded cursor-pointer transition-colors\n                  ".concat(d===t?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-200 dark:hover:bg-gray-800"),onClick:()=>x(t),children:[(0,r.jsxs)("span",{className:"font-semibold text-blue-700 dark:text-blue-300 mr-2",children:[t+1,"."]}),(0,r.jsx)("span",{className:"font-medium text-gray-800 dark:text-gray-100",title:e.name,children:e.name}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:e.votes})]},e.name))})]}),(0,r.jsx)("section",{className:"flex-1 min-h-[60vh] h-[70vh] md:h-[80vh] w-full rounded-lg shadow-lg overflow-hidden border border-gray-200 dark:border-gray-800",children:s?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-xl",children:"Loading map..."}):(0,r.jsxs)(c,{center:[56,-96],zoom:4,style:{width:"100%",height:"100%"},scrollWheelZoom:!0,children:[(0,r.jsx)(function(e){let{selectedIdx:t,top10:n,top10MarkerRefs:r}=e,l=o().map;return(0,a.useEffect)(()=>{if(null!==t&&n[t]){let{latitude:e,longitude:a}=n[t];l.setView([e,a],12,{animate:!0}),setTimeout(()=>{var e;null==(e=r.current[t])||e.openPopup()},400)}},[t]),null},{selectedIdx:d,top10:m,top10MarkerRefs:f}),(0,r.jsx)(g,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((e,t)=>{let n=m.findIndex(t=>t.name===e.name);return(0,r.jsx)(b,{position:[e.latitude,e.longitude],icon:p,ref:-1!==n?e=>{f.current[n]=e}:void 0,children:(0,r.jsxs)(v,{children:[(0,r.jsx)("strong",{children:e.name}),(0,r.jsx)("br",{}),e.Province,(0,r.jsx)("br",{}),"Votes: ",e.votes]})},t)})]})})]}),(0,r.jsxs)("section",{className:"w-full max-w-6xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:[(0,r.jsx)(F,{title:"Total Votes",value:h.toLocaleString(),color:"#2563eb"}),(0,r.jsx)(F,{title:"Average Votes per Campus",value:O.toLocaleString(),color:"#2563eb"}),(0,r.jsx)(F,{title:"Highest Votes",value:L?"".concat(L.name," (").concat(null==(e=L.votes)?void 0:e.toLocaleString(),")"):"-",color:"#16a34a"}),(0,r.jsx)(F,{title:"Lowest Votes",value:T?"".concat(T.name," (").concat(null==(t=T.votes)?void 0:t.toLocaleString(),")"):"-",color:"#dc2626"}),(0,r.jsx)(F,{title:"Province with Highest Total Votes",value:P?"".concat(P[0]," (").concat(P[1].toLocaleString(),")"):"-",color:"#a21caf"})]}),(0,r.jsxs)("section",{className:"w-full max-w-5xl mx-auto mt-4 mb-8 p-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white",children:"Data Insights"}),(0,r.jsxs)("ul",{className:"list-disc pl-6 space-y-1 text-gray-700 dark:text-gray-200",children:[(0,r.jsx)("li",{children:B}),(0,r.jsx)("li",{children:"The top 5 campuses account for ".concat(W,"% of all on-campus votes.")}),(0,r.jsx)("li",{children:D})]})]}),(0,r.jsxs)("section",{className:"w-full max-w-5xl mx-auto mb-12 p-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Total Votes by Province  "}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4 flex flex-col items-center",children:[(0,r.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,r.jsx)("div",{style:{writingMode:"vertical-rl",textAlign:"center",fontWeight:"bold",fontSize:18,color:"#fff",marginRight:16,minWidth:40,height:440,display:"flex",alignItems:"center",justifyContent:"center",transform:"rotate(180deg)"},children:"Total Votes"}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(y.u,{width:"100%",height:440,children:(0,r.jsxs)(j.E,{data:A,margin:{top:32,right:48,left:0,bottom:0},children:[(0,r.jsx)(w.d,{strokeDasharray:"3 3"}),(0,r.jsx)(N.W,{dataKey:"Province",fontSize:16,tickFormatter:e=>e,angle:0,textAnchor:"middle",interval:0,minTickGap:10,padding:{left:24,right:24}}),(0,r.jsx)(k.h,{fontSize:14,tickMargin:12}),(0,r.jsx)(C.m,{formatter:e=>e.toLocaleString(),labelFormatter:e=>(0,r.jsx)("span",{style:{fontWeight:"bold",color:"#1e293b"},children:R[e]||e})}),(0,r.jsx)(S.y,{dataKey:"votes",fill:"#2563eb",radius:[4,4,0,0]})]})})})]}),(0,r.jsx)("div",{style:{width:"100%",textAlign:"center",fontWeight:"bold",fontSize:18,color:"#fff",marginTop:12},children:"Province"})]})]}),(0,r.jsxs)("div",{className:"w-full max-w-5xl mx-auto mb-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:["Source: ",(0,r.jsx)("a",{href:"https://www.elections.ca/content.aspx?section=res&dir=rep/off/camp_43&document=index&lang=e",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-700",children:"Campus Voting Turnout - 42nd and 43rd General Elections"}),", elections.ca"]})]})}},68413:()=>{}}]);